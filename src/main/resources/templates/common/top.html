<!--这里大 变 样-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Category</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Font family -->
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700%7CRoboto:400,500,700&display=swap" rel="stylesheet">

    <!-- Libary -->
    <link rel="stylesheet" href="/vendors/owlcarousel/assets/owl.carouselv2.2.css">
    <link rel="stylesheet" href="/vendors/owlcarousel/assets/owl.theme.default.min.css">
    <link rel="stylesheet" href="/vendors/slick/slick.css">
    <link rel="stylesheet" href="/vendors/slick/slick-theme.css">
    <link rel="stylesheet" type="text/css" href="/css/animate.min.css">
    <link rel="stylesheet" href="/vendors/rangeslider/css/ion.rangeSlider.min.css"/>
    <link rel="stylesheet" href="/vendors/rangeslider/css/theme.scss.css">
    <link rel="stylesheet" href="/vendors/rangeslider/css/layout.min.css">

    <!-- Font -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/fonts/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="/fonts/linearicons/style.css">
    <link rel="stylesheet" href="/fonts/linea/styles.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
<!--    <link rel="StyleSheet" href="/css/jpetstore.css" type="text/css" media="screen"/>-->
</head>
<body>
<!-- Header -->
<header>
    <!-- Top header -->
    <div class="header-topbar">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="st2-info-header">
                        <ul class="st2-info-header-list">
                            <li class="st2-info-li st2-info-phone">
                                <span>P: (+00) 123 567990</span>
                            </li>
                            <li class="st2-info-li st2-info-email">
                                <span>E: WWW.csu.edu.cn</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="st2-info-myacount">
                        <ul class="st2-myacount-list">
                            <li class="st2-myacount-li st2-myacount"><a class="st2-myacount-link" href="">Copyright © 2020 All Rights Reserved</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header bottom -->
    <div class="header-bottom">
        <div class="header-bottom-st2-wrapper">
            <div class="header-bottom-st2-inner">
                <div class="container">
                    <div class="row js-compare">
                        <div class="col-lg-3 st2-col-lapt-3 col-md-3 col-3">
                            <div class="st2-header-logo">
                                <img src="/images/homepage2/logo-footer.jpg" alt="Logo">
                            </div>
                        </div>
                        <div class="col-lg-6 hide-reponsive js-dad">
                            <!-- Menu -->
                            <div class="st2-hamadryad-menu">
                                <nav>
                                    <ul class="st2-menu-primary">
                                        <li class="st2-li-primary">
                                            <a href="/catalog/main/1" class="st2-item-link">Home</a>
                                        </li>
                                        <li class="st2-li-primary" th:if="${isLogin eq false}" id="signin">
                                            <a class="st2-item-link" href="/accounts/signon" >Sign In</a>
                                        </li>
                                        <li class="st2-li-primary" th:if="${isLogin eq true}" id="signout">
                                            <a class="st2-item-link" href="/accounts/signoff" >Sign Out</a>
                                        </li>
                                        <li class="st2-li-primary" th:if="${isLogin eq true}" id="myaccount">
                                            <a class="st2-item-link" href="/accounts/editaccounts" >My Account</a>
                                        </li>
                                        <li class="st2-li-primary"><a class="st2-item-link" href="/cms/main">CMS</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-lg-3 st2-col-lapt-9 col-md-9 col-9">
                            <div class="st2-control-right">
                                <div class="st2-control">
                                    <!-- search mobie -->
                                    <div class="search-mobie" data-toggle="collapse" data-target="#showSearch">
                                        <span class="lnr lnr-magnifier"></span>
                                    </div>
                                    <!-- search -->
                                    <div class="st2-search-box st2-control-block hide-reponsive">
                                        <div class="st2-search-block">
                                            <form class="st2-search-form" action="/catalog/searchProducts" method="post">
                                                <div class="at2-search-fields">
                                                        <div class="st2-search-input">
                                                                <input type="text" class="st2-search-field" id="keyword" name="keyword" placeholder="Search ...">
                                                                <script>
                                                                    $("#keyword").autocomplete("getdata.jsp");
                                                                </script>
                                                            <button type="submit" class="st2-search-submit" name="searchProducts"><span class="lnr lnr-magnifier"></span></button>

                                                            <!--<input type="search"  placeholder="Search ..." value="" name="s">-->
<!--                                                                    <script>-->
<!--                                                                        $("#keyword").autocomplete("getdata.jsp");-->
<!--                                                                    </script>-->
<!--                                                                <button type="submit" class="st2-search-submit">-->
<!--                                                                    <span class="lnr lnr-magnifier"></span>-->
<!--                                                                </button>-->
                                                        </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <!-- cart -->
                                    <div class="st2-cart-block st2-control-block js-click-cart">
                                        <div class="st2-cart-icon">
                                            <span class="icon-ecommerce-basket"></span>
                                            <span class="st2-cart-number">2</span>
                                        </div>
                                    </div>
                                    <!-- mega menu -->
                                    <div class="st2-megamenu-block st2-control-block js-click-megamenu">
                                        <div class="st2-megamenu-icon">
                                            <span class="lnr lnr-menu"></span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- Form search -->
                        <form method="get" class="search-form collapse" action="/search" id="showSearch">
                            <div class="search-fields">
                                <div class="search-input">
                                    <span class="reset-instant-search-wrap"></span>
                                    <input type="search" class="search-field" placeholder="Instant search ..." value="" name="s">
                                    <button type="submit" class="search-submit">
                                        <span class="lnr lnr-magnifier"></span>
                                    </button>
                                </div>
                            </div>
                        </form>
                        <!-- End Form search -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mini cart -->
    <div class="hamadryad-minicart">
        <div class="hamadryad-minicart-content">
            <h3 class="hamadryad-minicart-title">Your cart</h3>
            <span class="hamadryad-minicart-number">2</span>
            <div class="hamadryad-minicart-close">
                <i class="lnr lnr-cross"></i>
            </div>
            <div class="hamadryad-minicart-list-item">
                <div class="list-item">
                    <ol class="hamadryad-minicart-items">
                        <li class="product-cart">
                            <a href="" class="product-cart-thumb"><img src="/images/products/product-1.jpg" alt=""></a>
                            <div class="product-detail">
                                <div class="product-name"><a href="">Candle Bowl </a></div>
                                <div class="product-detail-info">
                                    <div class="product-quality">QTY : 1</div>
                                    <div class="product-cost">$169.00</div>
                                </div>
                            </div>
                            <div class="product-remove">
                                <a href=""><i class="lnr lnr-cross"></i></a>
                            </div>
                        </li>
                        <li class="product-cart">
                            <a href="" class="product-cart-thumb"><img src="/images/products/product-2.jpg" alt=""></a>
                            <div class="product-detail">
                                <div class="product-name"><a href="">Candle Bowl </a></div>
                                <div class="product-detail-info">
                                    <div class="product-quality">QTY : 1</div>
                                    <div class="product-cost">$169.00</div>
                                </div>
                            </div>
                            <div class="product-remove">
                                <a href=""><i class="lnr lnr-cross"></i></a>
                            </div>
                        </li>
                    </ol>
                </div>
            </div>
            <div class="subtotal">
                <span class="total-title">Total:</span>
                <span class="total-price">$190.00</span>
            </div>
            <div class="hamadryad-minicart-action">
                <div class="btn-action-minicart viewcart">
                    <a th:href="@{'/carts/users/' + ${myAccount?.getUsername()}}">Viewcart</a></div>
                <div class="btn-action-minicart checkout">Checkout</div>
            </div>
        </div>
    </div>
    <div class="minicart-bg-overlay" style="display: none;"></div>

    <!-- Menu mobie -->
    <div class="box-mobile-menu">
        <span class="box-title">Menu</span>
        <a href="#" class="close-menu" id="pull-closemenu">
            <i class="lnr lnr-cross"></i>
        </a>
        <div class="menu-clone">
            <ul class="main-menu">
                <li class="menu-item menu-item-has-children">
                    <a href="Homepage01.html">Home</a>
                    <span class="toggle-submenu"></span>
                    <div class="submenu">
                        <div class="col-12 col-md-12 custom-col">
                            <div class="col-inner">
                                <div class="col-wrapper-item">
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="Homepage01.html">Homepage v1</a></li>
                                        <li class="style-item"><a class="afont200" href="Homepage02.html">Homepage v2</a></li>
                                        <li class="style-item"><a class="afont200" href="Homepage03.html">Homepage v3</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="menu-item menu-item-has-children">
                    <a href="List_ShopPageFullWidth.html">Shop</a>
                    <span class="toggle-submenu"></span>
                    <div class="submenu">
                        <div class="col-12 col-md-12 custom-col">
                            <div class="col-inner">
                                <div class="col-wrapper-item">
                                    <h2 class="widget-title">Shop</h2>
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="List_ShopPageFullWidth.html">Shop Fullwidth</a></li>
                                        <li class="style-item"><a class="afont200" href="List_Shop_Sidebar-Left.html">Shop Sidebar Left</a></li>
                                    </ul>
                                </div>
                                <div class="col-wrapper-item">
                                    <h2 class="widget-title">Product Details</h2>
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="ProductDetail_v1.html">Product detail v1</a></li>
                                        <li class="style-item"><a class="afont200" href="ProductDetail_v2.html">Product detail v2</a></li>
                                        <li class="style-item"><a class="afont200" href="ProductDetail_v3.html">Product detail v3</a></li>
                                        <li class="style-item"><a class="afont200" href="ProductDetail_v4.html">Product detail v4</a></li>
                                    </ul>
                                </div>
                                <div class="col-wrapper-item">
                                    <h2 class="widget-title">Pages</h2>
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="Hover&Active-v2.html">Hover&Active v2</a></li>
                                        <li class="style-item"><a class="afont200" href="Popup.html">Popup</a></li>
                                        <li class="style-item"><a class="afont200" href="ContactUs.html">Contact us</a></li>
                                    </ul>
                                </div>
                                <div class="col-wrapper-item">
                                    <h2 class="widget-title">Table Tree Plant</h2>
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="">New Arrivals</a></li>
                                        <li class="style-item"><a class="afont200" href="">Best Product</a></li>
                                        <li class="style-item"><a class="afont200" href="">Deal Of The Week</a></li>
                                        <li class="style-item"><a class="afont200" href="">Top Rated</a></li>
                                        <li class="style-item"><a class="afont200" href="">Our Product</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="menu-item menu-item-has-children"><a href="">Features</a></li>
                <li class="menu-item menu-item-has-children"><a href="">Portfolio</a></li>
                <li class="menu-item menu-item-has-children">
                    <a href="Blog&New_v1.html">Blog</a>
                    <span class="toggle-submenu"></span>
                    <div class="submenu">
                        <div class="col-12 col-md-12 custom-col">
                            <div class="col-inner">
                                <div class="col-wrapper-item">
                                    <ul class="menu-shop-style">
                                        <li class="style-item"><a class="afont200" href="Blog&New_v1.html">Blog & New 1</a></li>
                                        <li class="style-item"><a class="afont200" href="Blog&New_v2.html">Blog & New 1</a></li>
                                        <li class="style-item"><a class="afont200" href="Blog&NewPost.html">Blog & New Post</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="menu-item menu-item-has-children"><a href="AboutUs.html">About Us</a></li>
            </ul>
        </div>
    </div>
    <div class="menu-overlay"></div>
</header>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="/js/jquery-1.12.4.min.js"></script>
<script src="/vendors/owlcarousel/owl.carouselv2.2.min.js"></script>
<script src="/vendors/slick/slick.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/vendors/rangeslider/js/ion.rangeSlider.min.js"></script>
<script src="/js/custom.js"></script>
<!--    <header th:fragment="header">-->
<!--        <div id="Header">-->

<!--            <div id="Menu">-->
<!--                <div id="MenuContent">-->
<!--                    <a th:href="@{'/cart/viewCart?username=' + ${myAccount?.getUsername()}}"><img align="middle" name="img_cart" src="/images/cart.gif" alt=""/></a>-->
<!--                    <img align="middle" src="/images/separator.gif" alt=""/>-->
<!--                        <a th:if="${isLogin eq false}" href="/account/signon" name="checkIfSignon" id="signin">Sign In</a>-->
<!--                        <a th:if="${isLogin eq true}" href="/account/signout">Sign Out</a>-->
<!--                    <img th:if="${isLogin eq true}" align="middle" src="/images/separator.gif" alt=""/>-->
<!--                    <a th:if="${isLogin eq true}" href="/account/editAccountForm">My Account</a>-->
<!--                    <img align="middle" src="/images/separator.gif" alt=""/>-->
<!--                    <a href="viewLog">Log</a>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div id="Logo">-->
<!--                <div id="LogoContent">-->
<!--                    <a href="/catalog/viewMain"><img src="/images/Logo.jpg" alt=""/></a>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div id="Search">-->
<!--                <div id="SearchContent">-->
<!--                    <form action="/catalog/searchProducts" method="post">-->
<!--                        <input type="text" id="keyword" name="keyword" size="14" />-->
<!--                        <script>-->
<!--                            $("#keyword").autocomplete("getdata.jsp");-->
<!--                        </script>-->
<!--                        <input type="submit" name="searchProducts" value="Search" />-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div id="QuickLinks">-->
<!--                <a href="/catalog/viewCategory?categoryId=FISH"><img src="/images/sm_fish.gif" alt=""/></a>-->
<!--                <img src="/images/separator.gif" alt=""/>-->
<!--                <a href="/catalog/viewCategory?categoryId=DOGS"><img src="/images/sm_dogs.gif" alt=""/></a>-->
<!--                <img src="/images/separator.gif" alt=""/>-->
<!--                <a href="/catalog/viewCategory?categoryId=REPTILES"><img src="/images/sm_reptiles.gif" alt=""/></a>-->
<!--                <img src="/images/separator.gif" alt=""/>-->
<!--                <a href="/catalog/viewCategory?categoryId=CATS"><img src="/images/sm_cats.gif" alt=""/></a>-->
<!--                <img src="/images/separator.gif" alt=""/>-->
<!--                <a href="/catalog/viewCategory?categoryId=BIRDS"><img src="/images/sm_birds.gif" alt=""/></a>-->
<!--            </div>-->

<!--        </div>-->
<!--    </header>-->
</body>
</html>

<script type="text/javascript">
    Array.prototype.unique = function(){
        this.sort();
        var res = [];
        var json = {};
        for (var i = 0; i < this.length; i++) {
            if(!json[this[i]]){
                res.push(this[i]);
                json[this[i]] = 1;
            }
        }
        return res;
    }

    // 对样式操作
    var setClass = {
        hasClass: function(elements,cName){ // 判断是否含有某个class
            if(elements.className.match(new RegExp( "(\\s|^)" + cName + "(\\s|$)") ))
                return true;
            else
                return false;
        },
        addClass: function(elements,cName){ // 添加class
            if( !this.hasClass( elements,cName ) ){
                elements.className += " " + cName;
            };
        },
        removeClass: function(elements,cName){  // 移除某个class
            if( this.hasClass( elements,cName ) ){
                elements.className = elements.className.replace( new RegExp( "(\\s|^)" + cName + "(\\s|$)" )," " );
            }
        }
    }

    var Bind = function(This){
        return function(){
            This.init();
        }
    }

    function AutoComplete(keyword,auto,arr) {
        this.obj = document.getElementById(keyword);
        this.autoObj = document.getElementById(auto);
        this.search_value = ""; //当前的搜索输入值
        this.index = -1;        //当前选中的DIV的索引
        this.value_arr = arr;   //数据库中供检索的值 不包含重复值
    }
    AutoComplete.prototype = {
        // 初始化
        init: function(){
            var This = this;
            setClass.removeClass(This.autoObj,"hidden");
            this.autoObj.style.left = this.obj.offsetLeft + "px";
            this.autoObj.style.top = this.obj.offsetTop + this.obj.offsetHeight + "px";
        },
        //删除自动完成需要的所有DIV
        deleteDIV: function(){
            while(this.autoObj.hasChildNodes()){
                this.autoObj.removeChild(this.autoObj.firstChild);
            }
            setClass.addClass(this.autoObj,"hidden");
        },
        autoOnmouseover: function(index){
            if(index != this.index){
                setClass.addClass(this.autoObj.children[index],"on");
                setClass.removeClass(this.autoObj.children[this.index],"on");
                this.index = index;
            }
        },
        setValue: function(This){
            return function(){
                This.obj.value = this.seq;
                setClass.addClass(This.autoObj,"hidden");
            }
        },
        // 响应键盘
        pressKey: function(event){
            var code = event.keyCode;
            var length = this.autoObj.children.length;
            if(code == 38){     //↑
                setClass.removeClass(this.autoObj.children[this.index],"on");
                this.index--;
                if(this.index < 0){
                    this.index = length - 1;
                }
                setClass.addClass(this.autoObj.children[this.index],"on");
                this.obj.value = this.autoObj.children[this.index].seq;
            }else if(code == 40){   //↓
                setClass.removeClass(this.autoObj.children[this.index],"on");
                this.index++;
                if(this.index > length-1){
                    this.index = 0;
                }
                setClass.addClass(this.autoObj.children[this.index],"on");
                this.obj.value = this.autoObj.children[this.index].seq;
            }else{          //回车
                this.obj.value = this.autoObj.children[this.index].seq;
                setClass.addClass(this.autoObj,"hidden");
                this.index = -1;
            }
        },
        // 程序入口
        start: function(event){
            event = event || window.event;
            var code = event.keyCode;
            var This = this;
            if(code != 13 && code != 38 && code != 40){
                this.init();
                this.deleteDIV();
                this.search_value = this.obj.value;
                var valueArr = this.value_arr.unique();
                //去掉前后空格不能为空
                if(this.obj.value.replace(/(^\s*)|(\s*$)/g,"") == ""){ return;}
                //判断数组中是否含有输入的关键字
                try{
                    var reg = new RegExp("("+ this.obj.value +")","i"); //输入"aaa" 则 reg = /(aaa)/i
                }catch(e){
                    alert(e.message);
                }
                var div_index = 0;  //记录匹配索引个数
                for (var i = 0; i < valueArr.length; i++) {
                    if(reg.test(valueArr[i])){
                        var div = document.createElement("div");
                        div.className = "auto_out";
                        div.seq = valueArr[i];
                        div.index = div_index;
                        div.innerHTML = valueArr[i].replace(reg,"<strong>$1</strong>");
                        this.autoObj.appendChild(div);
                        setClass.removeClass(this.autoObj,"hidden");
                        div_index++;
                        if(div_index == 1) {
                            setClass.addClass(this.autoObj.firstChild,"on");
                            this.index = 0;
                        }
                        div.onmouseover = function(){
                            This.autoOnmouseover(this.index);
                        }
                        div.onclick = this.setValue(This);
                    }
                }
            }else{
                this.pressKey(event);
            }
            window.onresize = Bind(This);
        }
    }

    var xmlHttpRequest;
    function createXMLHttpRequest()
    {
        if (window.XMLHttpRequest) //非IE浏览器
        {
            xmlHttpRequest = new XMLHttpRequest();
        }
        else if (window.ActiveObject)//IE6以上版本的IE浏览器
        {
            xmlHttpRequest = new ActiveObject("Msxml2.XMLHTTP");
        }
        else //IE6及以下版本IE浏览器
        {
            xmlHttpRequest = new ActiveObject("Microsoft.XMLHTTP");
        }
    }

    var keyword = document.getElementById('keyword').value;
    sendRequest("/searchProductUpdate?keyword=" + keyword);

    function sendRequest(url) {
        createXMLHttpRequest();
        xmlHttpRequest.open("GET", url, true);
        xmlHttpRequest.onreadystatechange = processResponse;
        xmlHttpRequest.send(null);
    }

    function processResponse() {
        if (xmlHttpRequest.readyState == 4) {
            if (xmlHttpRequest.status == 200) {
                var resp = xmlHttpRequest.responseText;

                var array = resp.split(",");
                var autoComplete = new AutoComplete("keyword", "auto", array);
                document.getElementById("keyword").onkeyup = function (event) {
                    autoComplete.start(event);
                }
                var div2 = document.getElementById('searchMsg');
            }
        }
    }
</script>





